# Athen â€“ Modern Documentation Framework

**English** | [ç®€ä½“ä¸­æ–‡](./README.zh-CN.md)

Athen is a **Vite-powered**, **MDX-based** static-site generator built on the **Essor** framework ecosystem. Designed for modern product documentation, Athen focuses on developer-experience, performance, and extensibility while providing first-class TypeScript support.

> **Built with Essor**: Athen leverages the [Essor](https://github.com/estjs/essor) reactive framework and [Essor-Router](https://github.com/estjs/essor-router) for a modern, component-driven development experience.

---

## âœ¨ Features

- **Instant Dev Server** â€“ Powered by Vite with lightning-fast HMR.
- **Essor Framework** â€“ Built on the modern Essor reactive framework with JSX support.
- **MDX Pipeline** â€“ Built-in remark/rehype plugins (Shiki, TOC, Tip, Link, Raw Content, Last-Updated).
- **Component-First** â€“ Write pages in Essor JSX or plain Markdown; import Essor components anywhere.
- **Convention-based Routing** â€“ Automatic file-system routing with dynamic imports and preloading.
- **Theme System** â€“ Default theme included; extend or create your own with a clean API.
- **Plugin Ecosystem** â€“ Built-in plugins for MDX, UnoCSS, search, analytics, etc.; add your own via `plugins:` field.
- **i18n & Live Switching** â€“ Serve multiple locales with real-time language toggle.
- **Static-Site Generation** â€“ SEO-ready SSG with pre-rendering support.
- **Testing First** â€“ Comprehensive unit + e2e coverage with Vitest + Playwright.
- **One-Command Scaffold** â€“ `npx create-athen` to bootstrap a new project in seconds.

---

## ğŸ“¦ Packages

This monorepo contains the following packages:

| Package | Description | Version |
|---------|-------------|---------|
| [`athen`](./packages/athen) | Core framework and CLI | ![npm](https://img.shields.io/npm/v/athen) |
| [`@athen/plugin-mdx`](./packages/plugin-mdx) | MDX processing plugin | ![npm](https://img.shields.io/npm/v/@athen/plugin-mdx) |
| [`@athen/plugin-search`](./packages/plugin-search) | Full-text search plugin | ![npm](https://img.shields.io/npm/v/@athen/plugin-search) |
| [`@athen/plugin-analytics`](./packages/plugin-analytics) | Analytics integration | ![npm](https://img.shields.io/npm/v/@athen/plugin-analytics) |
| [`create-athen`](./packages/create-athen) | Project scaffolding tool | ![npm](https://img.shields.io/npm/v/create-athen) |

---

## ğŸš€ Quick Start

```bash
# 1. Scaffold a new project
npx create-athen my-docs
cd my-docs

# 2. Install dependencies
pnpm install

# 3. Start local dev server
pnpm dev

# 4. Build for production
pnpm build

# 5. Preview the static output
pnpm preview
```

---

## ğŸ“ Project Structure

A typical user-land repo generated by `create-athen` looks like:

```
my-docs/
â”œâ”€ docs/          # Markdown / MDX content
â”œâ”€ public/        # Static assets copied verbatim
â”œâ”€ athen.config.ts# Site configuration file
â””â”€ package.json   # Scripts & dependencies
```

---

## âš™ï¸ Configuration Highlights

Configuration lives in `athen.config.ts` (TypeScript is supported natively):

```ts
import { defineConfig } from "athen";

export default defineConfig({
  title: "My Docs",
  lang: "en-US",
  base: "/",
  themeConfig: {
    nav: [
      { text: "Guide", link: "/guide/getting-started" },
      { text: "API", link: "/api/" }
    ],
    sidebar: {
      "/guide/": [
        {
          text: "Getting Started",
          items: [
            { text: "Introduction", link: "/guide/" },
            { text: "Installation", link: "/guide/installation" }
          ]
        }
      ]
    },
    socialLinks: [
      { icon: "github", link: "https://github.com/your/repo" }
    ]
  },
  // Multi-language support
  locales: {
    "/zh/": { 
      lang: "zh-CN", 
      title: "ä¸­æ–‡æ–‡æ¡£",
      themeConfig: {
        nav: [
          { text: "æŒ‡å—", link: "/zh/guide/getting-started" }
        ]
      }
    }
  },
  // Search configuration
  search: {
    provider: "flex" // or "algolia"
  },
  // Analytics configuration
  analytics: {
    google: "G-XXXXXXXXXX"
  }
});
```

---

## ğŸ¨ Theming & Styling

- Leverages **UnoCSS** by default for atomic CSS; easily switch to Tailwind or vanilla CSS.
- Override SCSS variables or shadow any component via the file-system.
- Provide your own `Layout.tsx` to create a fully custom look.
- Built on **Essor** components for maximum flexibility.

### Layout Slots API

You can inject custom Essor components into predefined locations without fully replacing the default theme.
Add a `slots` field under `themeConfig` in `athen.config.ts`:

```tsx
export default defineConfig({
  themeConfig: {
    slots: {
      banner: () => <div class="my-banner">âœ¨ New Release Available! âœ¨</div>,
      sidebarExtra: () => <AdWidget />,
      footerExtra: CustomFooterNote,
    },
  },
});
```

Slot map:

| Slot Key | Render Position |
|----------|-----------------|
| `banner` | Immediately under the top navigation bar |
| `sidebarExtra` | Bottom of the sidebar navigation |
| `footerExtra` | Bottom of the page, after main content |

Third-party themes can override any or all of these by supplying their own components.

---

## ğŸ”Œ Plugin System

Athenâ€™s plugin layer builds on Viteâ€™s API and adds a few doc-focused conveniences.

### Built-in plugins

| Name | Purpose |
| ---- | ------- |
| `athen:config` | Expose site data + aliases |
| `athen:routes` | Convention-based file-system routing |
| `athen:site-data` | Virtual module for site configuration |
| `plugin-mdx` | Remark/rehype pipeline with Shiki highlighting |
| `unocss` | Atomic CSS framework |
| `plugin-svgr` | Import SVG as Essor components |
| `plugin-search` | FlexSearch full-text search (optional) |
| `plugin-analytics` | Analytics integration (optional) |
| `vite-plugin-inspect` | Development inspector |

### Using custom plugins

```ts title="athen.config.ts"
export default defineConfig({
  plugins: [
    legacy(), // Any Vite plugin works
    myCoolPlugin(), // Your own athen-plugin-*
  ],
});
```

*Plugins in this array run **before** the built-ins.* If a plugin shares the same `name` as a built-in plugin, the built-in one is removedâ€”making it effortless to swap the default search or analytics implementation.

To disable a built-in plugin entirely, set its config to `false` (e.g. `search: false`, `analytics: false`) or shadow it with a noop plugin.

Want to publish? Name it with the `athen-plugin-*` prefix and ship it to npm.

---

## ğŸŒ Internationalization (i18n)

- Define locale configurations in the `locales` field of your config.
- Runtime locale switcher component included in the default theme.
- Build-time static page generation for each locale with client-side routing.
- Automatic language detection and redirection support.

---

## ğŸ”¥ Hot Module Replacement

- Content edits (Markdown, MDX, Essor components) update instantly without losing state.
- Configuration changes hot-reload automatically.
- Plugin and theme changes are reflected immediately during development.

---

## ğŸ§ª Testing & Coverage

- **Vitest** for unit/integration testsâ€”configured out-of-the-box.
- **Playwright** for end-to-end testing; CI workflow runs against production builds.
- Comprehensive test coverage across all packages.
- Example tests included in the monorepo for reference.

---

## ğŸ™Œ Contributing

1. **Setup**: `pnpm install` â€“ Install workspace dependencies.
2. **Development**: `pnpm dev` â€“ Run example docs for local development.
3. **Building**: `pnpm build` â€“ Build all packages.
4. **Testing**: `pnpm test` â€“ Run unit and e2e tests.
5. **Linting**: `pnpm lint` â€“ Check code quality.

Submit PRs against `main`; all commits must follow [Conventional Commits](https://conventionalcommits.org/).

---

## ï¿½ Related Projects

- [Essor](https://github.com/estjs/essor) - The reactive framework powering Athen
- [Essor-Router](https://github.com/estjs/essor-router) - Client-side routing for Essor

---

## ğŸ“„ License

MIT Â© 2023-present [estjs](https://github.com/estjs)
