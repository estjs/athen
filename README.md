# Athen – Modern Documentation Framework

Athen is a **Vite-powered**, **React/MDX-based** static-site generator designed for modern product documentation.  Inspired by VitePress (Vue) and Rspress (React), Athen focuses on developer-experience, performance, and extensibility while providing first-class TypeScript support.

---

## ✨ Features

- **Instant Dev Server** – Powered by Vite with lightning-fast HMR.
- **MDX Pipeline** – Built-in remark/rehype plugins (Shiki, TOC, Tip, Link, Raw Content, Last-Updated).
- **Component-First** – Write pages in React or plain Markdown; import React components anywhere.
- **Theme System** – Default theme included; extend or create your own with a clean API.
- **Plugin Ecosystem 2.0** – Built-in plugins for MDX, UnoCSS, search, analytics, etc.; add your own via `plugins:` field and override any built-in by name.
- **i18n & Live Switching** – Serve multiple locales with real-time language toggle.
- **Static-Site Generation & Pre-Rendering** – SEO-ready out of the box.
- **Testing First** – 100 % unit + e2e coverage target, Vitest + Playwright presets included.
- **One-Command Scaffold** – `npx create-athen` to bootstrap a new project in seconds.

---

## 🚀 Quick Start

```bash
# 1. Scaffold a new project
npx create-athen my-docs
cd my-docs

# 2. Start local dev server
pnpm dev

# 3. Build for production
pnpm build

# 4. Preview the static output
pnpm serve
```

---

## 📁 Project Structure

A typical user-land repo generated by `create-athen` looks like:

```
my-docs/
├─ docs/          # Markdown / MDX content
├─ public/        # Static assets copied verbatim
├─ athen.config.ts# Site configuration file
└─ package.json   # Scripts & dependencies
```

---

## ⚙️ Configuration Highlights

Configuration lives in `athen.config.ts` (TypeScript is supported natively):

```ts
import { defineConfig } from "athen";

export default defineConfig({
  title: "My Docs",
  lang: "en-US",
  base: "/",
  themeConfig: {
    nav: [
      { text: "Guide", link: "/guide/getting-started" },
      { text: "API", link: "/api/" }
    ],
    socialLinks: [
      { icon: "github", link: "https://github.com/your/repo" }
    ]
  },
  locales: {
    zh: { lang: "zh-CN", title: "中文文档" }
  },
  plugins: [
    // Example: add analytics plugin
    import("@athen/plugin-analytics").then(m => m.default({ id: "UA-XXXXX" }))
  ]
});
```

---

## 🎨 Theming & Styling

- Leverages UnoCSS by default; switch to Tailwind or vanilla CSS easily.
- Override SCSS variables or shadow any component via the file-system.
- Provide your own `Layout.tsx` to create a fully custom look.

### Layout Slots API

You can inject custom React components into predefined locations without fully replacing the default theme.
Add a `slots` field under `themeConfig` in `athen.config.ts`:

```tsx
export default defineConfig({
  themeConfig: {
    slots: {
      banner: () => <div className="my-banner">✨ Promo ✨</div>,
      sidebarExtra: () => <AdWidget />,
      footerExtra: CustomFooterNote,
    },
  },
});
```

Slot map:

| Slot Key | Render Position |
|----------|-----------------|
| `banner` | Immediately under the top navigation bar |
| `sidebarExtra` | Bottom of the sidebar navigation |
| `footerExtra` | Bottom of the page, after main content |

Third-party themes can override any or all of these by supplying their own components.

---

## 🔌 Plugin System

Athen’s plugin layer builds on Vite’s API and adds a few doc-focused conveniences.

### Built-in plugins

| Name | Purpose |
| ---- | ------- |
| `athen:config` | expose site data + aliases |
| `athen:routes` | file-system routing |
| `athen:transform` | MDX → JSX, front-matter injection |
| `plugin-mdx` | remark / rehype pipeline with Shiki |
| `unocss` | Atomic CSS |
| `plugin-svgr` | Import SVG as Essor component |
| `plugin-search` | FlexSearch full-text search (optional) |
| `plugin-analytics` | Inject analytics snippet (optional) |
| `vite-plugin-inspect` | Dev inspector |

### Using custom plugins

```ts title="athen.config.ts"
export default defineConfig({
  plugins: [
    legacy(), // any Vite plugin
    myCoolPlugin(), // your own athen-plugin-*
  ],
});
```

*Plugins in this array run **before** the built-ins.*  If a plugin shares the same `name` as a built-in plugin, the built-in one is removed—making it effortless to swap the default search or analytics implementation.

To disable a built-in plugin entirely set its config switch to `false` (e.g. `themeConfig.search = false`, `analytics = false`) or shadow it with a noop plugin.

Want to publish? Name it with the `athen-plugin-*` prefix and ship it to npm.

---

## 🌍 Internationalization (i18n)

- Define locale packs in `locales` field of config.
- Runtime locale switcher component included in default theme.
- Fallback strategy: build-time static pages for each locale + client-side routing.

---

## 🔥 Hot Module Replacement

- Content edits (Markdown, MDX, React) update instantly without losing state.
- Plugin & theme changes hot-reload as well.

---

## 🧪 Testing & Coverage

- **Vitest** for unit/integration tests—configured out-of-the-box.
- **Playwright** for e2e; CI workflow runs against a production build.
- Coverage threshold is enforced at 100 % lines/branches.

---

## 🙌 Contributing

1. `pnpm i` – install workspace dependencies.
2. `pnpm dev` – run example docs for local development of core packages.
3. Submit PRs against `main`; all commits must follow Conventional Commits.
4. Ensure tests & lint pass: `pnpm test` and `pnpm lint`.

---

## 📄 License

MIT © 2023-present
